---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  out.width = "100%"
)
```

# Equip

This file keeps track of my current stats, equip and potential upgrades.

```{r}
library(warlockr)

my_stats <- with_buffs(list(
  int = 267,
  sp = 512 + 63,
  crit = 7,
  hit = 10,
  mp5 = 0
),
consumables = c("gae", "eosp", "bwo")
)
unlist(my_stats)

my_stats_ony <- add_buff(my_stats, "ony")

my_equip <- yaml::read_yaml("equip.yaml")
my_changes <- yaml::read_yaml("changes.yaml")
my_bank <- yaml::read_yaml("bank.yaml")

show_statweights <- function(stats) {
  t(compute_statweights(stats, trinkets = "toep", seed = 42))
}

w <- max(nchar(names(c(my_changes, my_bank))))
show_result <- function(stats, changes) {
  df <- compare_equip(stats, my_equip, changes, seed = 561)
  df <- df[order(-df$dps), ]
  row.names(df) <- format(row.names(df), width = w)
  modifyList(df, lapply(df[c("dps", "diff")], round, digits = 2))
}


show_statweights(my_stats)
show_statweights(my_stats_ony)

show_result(my_stats, my_changes)

show_result(my_stats, my_bank)
show_result(my_stats_ony, my_bank)
```
